{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","components/Error.js","App.js","index.js"],"names":["Filter","newFilter","handleFilterChange","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Person","person","removePerson","name","number","onClick","Persons","personsToShow","map","id","baseUrl","exportedServices","getAll","a","request","axios","get","response","data","create","newObject","post","update","put","remove","delete","Notification","message","className","Error","App","useState","persons","setPersons","setNewName","setNewNumber","setNewFilter","notificationMessage","setNotificationMessage","errorMessage","setErrorMessage","useEffect","console","log","personService","then","initialPersons","length","filter","toLowerCase","includes","event","target","preventDefault","personObject","find","p","window","confirm","updatedPerson","copyPersons","splice","findIndex","setTimeout","catch","error","createdPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5705d2da.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({ newFilter, handleFilterChange }) => (\r\n    <div>\r\n        filter shown with <input value={newFilter} onChange={handleFilterChange} />\r\n    </div>\r\n)\r\n\r\nexport default Filter","import React from 'react';\r\n\r\nconst PersonForm = ({ addPerson, newName, handleNameChange, newNumber, handleNumberChange }) => {\r\n    return (\r\n        <div>\r\n            <form onSubmit={addPerson}>\r\n                <div>\r\n                    name: <input value={newName} onChange={handleNameChange} />\r\n                </div>\r\n                <div>\r\n                    number: <input value={newNumber} onChange={handleNumberChange} />\r\n                </div>\r\n                <div>\r\n                    <button type=\"submit\">add</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PersonForm;","import React from 'react';\r\n\r\nconst Person = ({ person, removePerson }) => (\r\n    <div>\r\n      {person.name} {person.number} <button onClick={() => removePerson(person)}>delete</button>\r\n    </div>\r\n  )\r\n\r\nconst Persons = ({ personsToShow, removePerson }) => {\r\n    return (\r\n        <div>\r\n            {personsToShow.map(person =>\r\n                <Person key={person.id} person={person} removePerson={removePerson} />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Persons;","import axios from \"axios\"\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = async () => {\r\n    const request = axios.get(baseUrl)\r\n    const response = await request\r\n    return response.data\r\n}\r\n\r\nconst create = async newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    const response = await request\r\n    return response.data\r\n}\r\n\r\nconst update = async (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    const response = await request\r\n    return response.data\r\n}\r\n\r\nconst remove = async (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    const response = await request\r\n    return response.data\r\n}\r\n\r\nconst exportedServices = { getAll, create, update, remove }\r\n\r\nexport default exportedServices","const Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"notification\">\r\n        {message}\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Notification","const Error = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Error","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\nimport './index.css'\nimport Error from './components/Error'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [ notificationMessage, setNotificationMessage ] = useState(null)\n  const [ errorMessage, setErrorMessage ] = useState(null)\n\n  useEffect(() => {\n    console.log('effect')\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n  console.log('render', persons.length, 'persons')\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    \n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    const person = persons.find(p => p.name === newName)\n\n    if (person) {\n      if (!window.confirm(`${person.name} is already added to phonebook, replace the old number with a new one?`)) {\n        return\n      }\n\n      personService\n        .update(person.id, personObject)\n        .then(updatedPerson => {\n          const copyPersons = [...persons]\n          copyPersons.splice(persons.findIndex(p => p.id === updatedPerson.id), 1, updatedPerson)\n          setPersons(copyPersons)\n          setNewName('')\n          setNewNumber('')\n          setNotificationMessage(`Updated phone number for ${updatedPerson.name}`)\n          setTimeout(() => {\n            setNotificationMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          setErrorMessage(`Information of ${person.name} has already been removed from server`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n      \n    } else {\n      personService\n      .create(personObject)\n      .then(createdPerson => {\n        setPersons(persons.concat(createdPerson))\n        setNewName('')\n        setNewNumber('')\n        setNotificationMessage(`Added ${createdPerson.name}`)\n        setTimeout(() => {\n          setNotificationMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        setErrorMessage(error.response.data.error)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n      })\n    }\n  }\n\n  const removePerson = (person) => {\n    if (!window.confirm(`Delete ${person.name} ?`)) {\n      return\n    }\n\n    personService\n      .remove(person.id)\n      .then(response => {\n        console.log(response)\n        setPersons(persons.filter(p => p.id !== person.id))\n        setNotificationMessage(`Removed ${person.name}`)\n          setTimeout(() => {\n            setNotificationMessage(null)\n          }, 5000)\n      })\n  }\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    console.log(event.target.value)\n    setNewFilter(event.target.value)\n  }\n\n  const personsToShow = persons.filter(person => person.name.toLowerCase().includes(newFilter.toLowerCase()))\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notificationMessage} />\n      <Error message={errorMessage} />\n      \n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange} />\n      \n      <h3>Add a new</h3>\n      \n      <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\n\n      <h3>Numbers</h3>\n      \n      <Persons personsToShow={personsToShow} removePerson={removePerson} />\n\n    </div>\n  )\n\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}