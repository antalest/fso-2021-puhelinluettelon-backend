{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","components/Error.js","App.js","index.js"],"names":["Filter","newFilter","handleFilterChange","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Person","person","removePerson","name","number","onClick","Persons","personsToShow","map","id","baseUrl","exportedServices","getAll","a","request","axios","get","response","data","create","newObject","post","update","put","remove","delete","Notification","message","className","Error","App","useState","persons","setPersons","setNewName","setNewNumber","setNewFilter","notificationMessage","setNotificationMessage","errorMessage","setErrorMessage","useEffect","console","log","personService","then","initialPersons","length","filter","toLowerCase","includes","event","target","preventDefault","personObject","find","p","window","confirm","updatedPerson","copyPersons","splice","findIndex","setTimeout","catch","createdPerson","concat","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d806569d.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({ newFilter, handleFilterChange }) => (\r\n  <div>\r\n    filter shown with <input value={newFilter} onChange={handleFilterChange} />\r\n  </div>\r\n)\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({ addPerson, newName, handleNameChange, newNumber, handleNumberChange }) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit={addPerson}>\r\n        <div>\r\n                    name: <input value={newName} onChange={handleNameChange} />\r\n        </div>\r\n        <div>\r\n                    number: <input value={newNumber} onChange={handleNumberChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Person = ({ person, removePerson }) => (\r\n  <div>\r\n    {person.name} {person.number} <button onClick={() => removePerson(person)}>delete</button>\r\n  </div>\r\n)\r\n\r\nconst Persons = ({ personsToShow, removePerson }) => {\r\n  return (\r\n    <div>\r\n      {personsToShow.map(person =>\r\n        <Person key={person.id} person={person} removePerson={removePerson} />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Persons","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = async () => {\r\n  const request = axios.get(baseUrl)\r\n  const response = await request\r\n  return response.data\r\n}\r\n\r\nconst create = async newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  const response = await request\r\n  return response.data\r\n}\r\n\r\nconst update = async (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  const response = await request\r\n  return response.data\r\n}\r\n\r\nconst remove = async (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  const response = await request\r\n  return response.data\r\n}\r\n\r\nconst exportedServices = { getAll, create, update, remove }\r\n\r\nexport default exportedServices","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className=\"notification\">\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification","import React from 'react'\r\n\r\nconst Error = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className=\"error\">\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Error","import React, { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\nimport personService from './services/persons'\r\nimport Notification from './components/Notification'\r\nimport './index.css'\r\nimport Error from './components/Error'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ newFilter, setNewFilter ] = useState('')\r\n  const [ notificationMessage, setNotificationMessage ] = useState(null)\r\n  const [ errorMessage, setErrorMessage ] = useState(null)\r\n\r\n  useEffect(() => {\r\n    console.log('effect')\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })\r\n  }, [])\r\n  console.log('render', persons.length, 'persons')\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n\r\n    const person = persons.find(p => p.name === newName)\r\n\r\n    if (person) {\r\n      if (!window.confirm(`${person.name} is already added to phonebook, replace the old number with a new one?`)) {\r\n        return\r\n      }\r\n\r\n      personService\r\n        .update(person.id, personObject)\r\n        .then(updatedPerson => {\r\n          const copyPersons = [...persons]\r\n          copyPersons.splice(persons.findIndex(p => p.id === updatedPerson.id), 1, updatedPerson)\r\n          setPersons(copyPersons)\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setNotificationMessage(`Updated phone number for ${updatedPerson.name}`)\r\n          setTimeout(() => {\r\n            setNotificationMessage(null)\r\n          }, 5000)\r\n        })\r\n        .catch(() => {\r\n          setErrorMessage(`Information of ${person.name} has already been removed from server`)\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000)\r\n        })\r\n\r\n    } else {\r\n      personService\r\n        .create(personObject)\r\n        .then(createdPerson => {\r\n          setPersons(persons.concat(createdPerson))\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setNotificationMessage(`Added ${createdPerson.name}`)\r\n          setTimeout(() => {\r\n            setNotificationMessage(null)\r\n          }, 5000)\r\n        })\r\n        .catch(error => {\r\n          setErrorMessage(error.response.data.error)\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000)\r\n        })\r\n    }\r\n  }\r\n\r\n  const removePerson = (person) => {\r\n    if (!window.confirm(`Delete ${person.name} ?`)) {\r\n      return\r\n    }\r\n\r\n    personService\r\n      .remove(person.id)\r\n      .then(response => {\r\n        console.log(response)\r\n        setPersons(persons.filter(p => p.id !== person.id))\r\n        setNotificationMessage(`Removed ${person.name}`)\r\n        setTimeout(() => {\r\n          setNotificationMessage(null)\r\n        }, 5000)\r\n      })\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewFilter(event.target.value)\r\n  }\r\n\r\n  const personsToShow = persons.filter(person => person.name.toLowerCase().includes(newFilter.toLowerCase()))\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={notificationMessage} />\r\n      <Error message={errorMessage} />\r\n\r\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange} />\r\n\r\n      <h3>Add a new</h3>\r\n\r\n      <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\r\n\r\n      <h3>Numbers</h3>\r\n\r\n      <Persons personsToShow={personsToShow} removePerson={removePerson} />\r\n\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n)"],"sourceRoot":""}